version: "3.8"

services:
  # Primary Database: PostgreSQL
  postgres:
    image: postgres:16-alpine
    environment:
      - POSTGRES_USER=memory_user
      - POSTGRES_PASSWORD=memory_pass
      - POSTGRES_DB=memory_system
    ports:
      - "5432:5432"
    volumes:
      - ./postgres:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U memory_user"]
      interval: 5s
      timeout: 5s
      retries: 5

  # Vector Database: Qdrant
  qdrant:
    image: qdrant/qdrant:latest
    ports:
      - "6333:6333"
      - "6334:6334"
    volumes:
      - ./qdrant:/qdrant/storage

  # Knowledge Graph: Neo4j
  neo4j:
    image: neo4j:5
    environment:
      - NEO4J_AUTH=neo4j/test
    ports:
      - "7474:7474"  # Browser
      - "7687:7687"  # Bolt
    volumes:
      - ./neo4j:/data

